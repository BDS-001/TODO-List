(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{C:()=>j});const e=document.querySelector(".projects"),n=document.querySelector("#content");let o=null;function c(t){const e=new Date(t),n=("0"+e.getDate()).slice(-2),o=("0"+(e.getMonth()+1)).slice(-2);return`${e.getFullYear()}-${o}-${n}`}function a(t,e){const n=new Date(t),o=new Date(e).getTime()-n.getTime();return Math.ceil(o/864e5)}function r(t){t.reset()}function s(){return Math.floor(Math.random()*Date.now()).toString(16)+(new Date).getTime().toString(16)}const l=function(){if(!localStorage.getItem("projects")){let t={};t=JSON.stringify(t),localStorage.setItem("projects",t)}return{newProject:function(t,e){const n={name:t,desc:e,id:s(),tasks:[]},o=JSON.parse(localStorage.getItem("projects"));return o[n.id]=n,localStorage.setItem("projects",JSON.stringify(o)),n},getCompletedTasks:function(t){return Object.values(JSON.parse(localStorage.getItem("tasks"))).filter((e=>e.completed&&e.project==t))},getInProgressTasks:function(t){const e=Object.values(JSON.parse(localStorage.getItem("tasks")));if(e)return e.filter((e=>!e.completed&&e.project==t))},addTask:function(t,e,n,o,c){const a=JSON.parse(localStorage.getItem("projects")),r=s(),l=i.newTask(r,e,n,t,o,c);return a[t].tasks.push(l.id),i.newTask(l),l},getAllTasks:function(t){return Object.values(JSON.parse(localStorage.getItem("tasks"))).filter((e=>e.project==t))},getProjectById:function(t){if(t)return JSON.parse(localStorage.getItem("projects"))[t]},deleteProject:function(t){JSON.parse(localStorage.getItem("projects")),i.getAllTasks()}}}(),i=function(){function t(){return JSON.parse(localStorage.getItem("tasks"))}function e(t){localStorage.setItem("tasks",JSON.stringify(t))}return localStorage.getItem("tasks")||e({}),{markComplete:function(n){const o=t();o[n].completed=!0,e(o)},newTask:function(n,o,a,r,l){const i={id:s(),title:n,desc:o,date:c(Date.now()),project:a,completed:!1,dueDate:r,priorityLevel:l},d=t();return d[i.id]=i,e(d),i},getAllTasks:function(){return Object.values(t())},findTaskById:function(e){return t()[e]},deleteTask:function(n){let o=t();delete o[n],e(o)}}}();function d(t,e){document.getElementById("modalOverlay").style.display=t,document.getElementById(e).style.display=t}function u(t,e){document.querySelector(t).addEventListener("click",e)}function m(t,e){document.querySelector(t).addEventListener("click",e)}const p=function(){const t=document.getElementById("projectForm");function e(){d("none","projectModal"),r(t)}function n(){let t=document.getElementById("projectName").value,n=document.getElementById("projectDescription").value;const o=l.newProject(t,n);j.buildProject(o),e()}return{openModal:function(){d("block","projectModal")},setup:function(){u(".project-close-btn",e),m("#submit-project",n),r(t)}}}(),g=function(){const t=document.getElementById("taskForm");function e(){d("none","taskModal"),r(t)}function n(){const t=document.getElementById("taskName").value,n=document.getElementById("taskDescription").value,c=document.getElementById("due-date").value,a=document.getElementById("priority-level").value;console.log("here"),i.newTask(t,n,o.dataset.projectId,c,a),k.getContent(o),e()}return{setup:function(){u(".task-close-btn",e),m("#submit-task",n),r(t)},openModal:function(){d("block","taskModal")}}}(),f=function(){function t(t){o&&(o.parentNode.style.backgroundColor="inherit"),t.parentNode.style.backgroundColor="var(--highlight-sidebar)",o=t}function e(e){e.preventDefault(),k.getContent(e.target),t(e.target)}return{changeView:e,addNavigationClickEvent:function(t){t.addEventListener("click",e)},highlightElement:t}}(),k=function(){function t(t){n.innerHTML="";const o=function(t){const e=document.createElement("div");return e.className="content-title",e.innerHTML=`<h1>${t}</h1>`,e}(t.dataset.title),r=function(t){const e=t.dataset.projectId;return e?l.getProjectById(e):null}(t);r?function(t,o,c){c.append(function(){const t=document.createElement("button");return t.id="add-task",t.textContent="Add Task",t.addEventListener("click",g.openModal),t}()),n.append(c),e(l.getAllTasks(o.id))}(0,r,o):function(t,o){n.append(o),"all"===t.dataset.category||("today"===t.dataset.category?function(){const t=c(Date.now());e(i.getAllTasks().filter((e=>e.dueDate===t)))}():"upcoming"===t.dataset.category?function(){const t=c(Date.now());e(i.getAllTasks().filter((e=>a(t,e.dueDate)<=7&&a(t,e.dueDate)>=0)))}():"anytime"===t.dataset.category||t.dataset.category)}(t,o)}function e(t){const e=document.createElement("div");e.className="tasks-container",t.forEach((t=>e.append(function(t,e=null){function n(t,e,n,o){const c=document.createElement(t);return c.className=e,c.textContent=n,o.appendChild(c),c}const o=document.createElement("div");o.className="task-card "+(t.completed?"completed":"");const c=n("div","meta-info","",o);if(n("p","date",`Date: ${t.date}`,c),n("p","status",t.completed?"Completed":"Incomplete",c),e&&n("h4","project-title",`Project: ${e.title}`,o),n("h3","title",t.title,o),n("p","description",t.desc,o),n("p","",`Due Date: ${t.dueDate}`,o),n("p","",`Priority Level: ${t.priorityLevel}`,o),!t.completed){const e=n("button","btn remove-btn","Remove Task",o);e.dataset.taskId=t.id,e.addEventListener("click",s);const c=n("button","btn complete-btn","Complete Task",o);c.dataset.taskId=t.id,c.addEventListener("click",r)}return o}(t)))),n.append(e)}function r(e){i.markComplete(e.target.dataset.taskId),t(o)}function s(e){const n=e.target.dataset.taskId;i.deleteTask(n),t(o)}return{getContent:t}}(),y=function(){document.querySelectorAll(".inbox-category").forEach((function(t){const e=t.querySelector("a");f.addNavigationClickEvent(e)}))},j=function(){function t(t){t.preventDefault(),p.openModal()}function n(t){const n=document.createElement("div");n.className="sidebar-element";const o=document.createElement("i");o.className="bi bi-dot";const c=document.createElement("a");c.innerHTML=t.name,c.setAttribute("href","javascript:;"),f.addNavigationClickEvent(c),c.dataset.title=t.name,c.dataset.projectId=t.id;const a=document.createElement("button");a.className="delete-project-btn",a.innerHTML='<i class="bi bi-trash"></i>',a.dataset.projectId=t.id,a.onclick=function(){console.log("delete project")},n.append(o),n.append(c),n.append(a),e.append(n)}return{setup:function(){document.querySelector("#add-project").addEventListener("click",t),Object.values(JSON.parse(localStorage.getItem("projects"))).forEach((t=>{n(t)}))},buildProject:n}}();!function(){y(),j.setup(),p.setup(),g.setup();const t=document.getElementById("startpage");f.highlightElement(t),k.getContent(t)}()})();