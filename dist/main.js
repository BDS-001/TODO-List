(()=>{"use strict";const e=function(){if(!localStorage.getItem("projects")){let e={};e=JSON.stringify(e),localStorage.setItem("projects",e)}function e(){return Math.floor(Math.random()*Date.now()).toString(16)+(new Date).getTime().toString(16)}return{newProject:function(t,n){const o={name:t,desc:n,id:e(),tasks:[]},a=JSON.parse(localStorage.getItem("projects"));return a[o.id]=o,localStorage.setItem("projects",JSON.stringify(a)),o},findTaskById:function(e){return JSON.parse(localStorage.getItem("tasks"))[e]},getCompletedTasks:function(e){return Object.values(JSON.parse(localStorage.getItem("tasks"))).filter((t=>t.completed&&t.project==e))},getInProgressTasks:function(e){const t=Object.values(JSON.parse(localStorage.getItem("tasks")));if(console.log("here",t),console.log("list",JSON.parse(localStorage.getItem("tasks"))),t)return t.filter((t=>!t.completed&&t.project==e))},generateUniqueId:e,addTask:function(n,o,a){const c=JSON.parse(localStorage.getItem("projects")),s=e(),l=t.newTask(s,o,a,n);return c[n].tasks.push(l.id),t.newTask(l),l}}}(),t=function(){if(!localStorage.getItem("tasks")){let e={};e=JSON.stringify(e),localStorage.setItem("tasks",e)}return{markComplete:function(e){const t=JSON.parse(localStorage.getItem("tasks"));t[e].completed=!0,localStorage.setItem("tasks",JSON.stringify(t))},newTask:function(e,t,n,o){const a={id:e,title:t,desc:n,date:Date.now(),project:o,completed:!1},c=JSON.parse(localStorage.getItem("tasks"));return c[a.id]=a,localStorage.setItem("tasks",JSON.stringify(c)),a}}}(),n=document.querySelector(".projects"),o=document.querySelector("#content"),a=function(){let e=null;function t(t){t.preventDefault(),c.getContent(t.target),function(t){e&&(e.style.backgroundColor="inherit"),t.target.parentNode.style.backgroundColor="var(--hilight-sidebar)",e=t.target.parentNode}(t)}return{changeView:t,addNavigationClickEvent:function(e){e.addEventListener("click",t)}}}(),c=function(){function t(e){console.log(e.target.dataset.taskId)}function n(e){console.log(e.target.dataset.taskId)}return{getContent:function(a){o.innerHTML="";const c=document.createElement("div");c.className="content-title",c.innerHTML=`<h1 style="font-size: 50px; font-weight: bold; display: inline;">${a.dataset.title}</h1>`;const s=function(e){const t=e.dataset.projectId;if(t)return JSON.parse(localStorage.getItem("projects"))[t]}(a);s?function(a,c,s){(function(e){const t=document.createElement("button");t.id="add-task",t.innerHTML="Add Task",e.append(t),o.append(e)})(s),function(a){const c=e.getInProgressTasks(a.id);console.log(a),c.forEach((e=>{!function(e){const a=document.createElement("div");a.className="task-card",e.completed&&a.classList.add("completed");const c=document.createElement("h3");c.textContent=e.title,a.appendChild(c);const s=document.createElement("p");s.textContent=e.description,a.appendChild(s);const l=document.createElement("p");l.textContent="Date: "+e.date,a.appendChild(l);const r=document.createElement("p");r.textContent="Status: "+(e.completed?"Completed":"Incomplete"),a.appendChild(r);const d=document.createElement("button");d.className="btn remove-btn",d.textContent="Remove Task",d.dataset.taskId=e.id,d.addEventListener("click",n),a.appendChild(d);const i=document.createElement("button");i.className="btn complete-btn",i.textContent="Complete Task",i.dataset.taskId=e.id,i.addEventListener("click",t),a.appendChild(i),o.appendChild(a)}(e)}))}(c)}(0,s,c):o.append(c)}}}(),s=function(){function t(){document.getElementById("modalOverlay").style.display="none",document.getElementById("projectModal").style.display="none",o()}function n(){let n=document.getElementById("projectName").value,o=document.getElementById("projectDescription").value;const a=e.newProject(n,o);r.buildProject(a),t()}function o(){const e=document.querySelectorAll(".modal-data");console.log(e),e.forEach((function(e){e.value=""}))}return{openModal:function(){document.getElementById("modalOverlay").style.display="block",document.getElementById("projectModal").style.display="block"},setup:function(){document.querySelector(".close-btn").addEventListener("click",t),document.querySelector("#submit-project").addEventListener("click",n),o()}}}(),l=function(){document.querySelectorAll(".inbox-category").forEach((function(e){const t=e.querySelector("a");a.addNavigationClickEvent(t)}))},r=function(){function e(e){e.preventDefault(),s.openModal()}function t(e){const t=document.createElement("div");t.className="sidebar-element";const o=document.createElement("i");o.className="bi bi-dot";const c=document.createElement("a");c.innerHTML=e.name,c.setAttribute("href","javascript:;"),a.addNavigationClickEvent(c),c.dataset.title=e.name,c.dataset.projectId=e.id,t.append(o),t.append(c),n.append(t)}return{setup:function(){document.querySelector("#add-project").addEventListener("click",e),Object.values(JSON.parse(localStorage.getItem("projects"))).forEach((e=>{t(e)}))},buildProject:t}}();l(),r.setup(),s.setup()})();