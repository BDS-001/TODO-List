(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(){return Math.floor(Math.random()*Date.now()).toString(16)+(new Date).getTime().toString(16)}t.d({},{C:()=>S});const n=function(){if(!localStorage.getItem("projects")){let t={};t=JSON.stringify(t),localStorage.setItem("projects",t)}return{newProject:function(t,n){const o={name:t,desc:n,id:e(),tasks:[]},a=JSON.parse(localStorage.getItem("projects"));return a[o.id]=o,localStorage.setItem("projects",JSON.stringify(a)),o},getCompletedTasks:function(t){return Object.values(JSON.parse(localStorage.getItem("tasks"))).filter((e=>e.completed&&e.project==t))},getInProgressTasks:function(t){const e=Object.values(JSON.parse(localStorage.getItem("tasks")));if(e)return e.filter((e=>!e.completed&&e.project==t))},addTask:function(t,n,a,c,r){const s=JSON.parse(localStorage.getItem("projects")),l=e(),i=o.newTask(l,n,a,t,c,r);return s[t].tasks.push(i.id),o.newTask(i),i},getAllTasks:function(t){return Object.values(JSON.parse(localStorage.getItem("tasks"))).filter((e=>e.project==t))},getProjectById:function(t){if(t)return JSON.parse(localStorage.getItem("projects"))[t]}}}(),o=function(){if(!localStorage.getItem("tasks")){let t={};t=JSON.stringify(t),localStorage.setItem("tasks",t)}return{markComplete:function(t){const e=JSON.parse(localStorage.getItem("tasks"));e[t].completed=!0,localStorage.setItem("tasks",JSON.stringify(e))},newTask:function(t,n,o,a,c){const r={id:e(),title:t,desc:n,date:Date.now(),project:o,completed:!1,dueDate:a,priorityLevel:c},s=JSON.parse(localStorage.getItem("tasks"));return s[r.id]=r,localStorage.setItem("tasks",JSON.stringify(s)),r},getAllTasks:function(){return Object.values(JSON.parse(localStorage.getItem("tasks")))},findTaskById:function(t){return JSON.parse(localStorage.getItem("tasks"))[t]}}}(),a=document.querySelector(".projects"),c=document.querySelector("#content");let r=null;function s(t){const e=new Date(t),n=("0"+e.getDate()).slice(-2),o=("0"+(e.getMonth()+1)).slice(-2);return`${e.getFullYear()}-${o}-${n}`}function l(t,e){const n=new Date(t),o=new Date(e).getTime()-n.getTime(),a=Math.ceil(o/864e5);return console.log(`Difference in days between ${t} and ${e}: ${a}`),console.log(a<=7),a}function i(t){t.reset()}function d(t,e){document.getElementById("modalOverlay").style.display=t,document.getElementById(e).style.display=t}function u(t,e){document.querySelector(t).addEventListener("click",e)}function m(t,e){document.querySelector(t).addEventListener("click",e)}const p=function(){const t=document.getElementById("projectForm");function e(){d("none","projectModal"),i(t)}function o(){let t=document.getElementById("projectName").value,o=document.getElementById("projectDescription").value;const a=n.newProject(t,o);S.buildProject(a),e()}return{openModal:function(){d("block","projectModal")},setup:function(){u(".project-close-btn",e),m("#submit-project",o),i(t)}}}(),g=function(){const t=document.getElementById("taskForm");function e(){d("none","taskModal"),i(t)}function n(){const t=document.getElementById("taskName").value,n=document.getElementById("taskDescription").value,a=document.getElementById("due-date").value,c=document.getElementById("priority-level").value;console.log("here"),o.newTask(t,n,r.dataset.projectId,a,c),k.getContent(r),e()}return{setup:function(){u(".task-close-btn",e),m("#submit-task",n),i(t)},openModal:function(){d("block","taskModal")}}}(),f=function(){function t(t){r&&(r.parentNode.style.backgroundColor="inherit"),t.parentNode.style.backgroundColor="var(--highlight-sidebar)",r=t}function e(e){e.preventDefault(),k.getContent(e.target),t(e.target)}return{changeView:e,addNavigationClickEvent:function(t){t.addEventListener("click",e)},highlightElement:t}}(),k=function(){function t(t){c.innerHTML="";const a=function(t){const e=document.createElement("div");return e.className="content-title",e.innerHTML=`<h1>${t}</h1>`,e}(t.dataset.title),r=function(t){const e=t.dataset.projectId;return e?n.getProjectById(e):null}(t);r?function(t,o,a){a.append(function(){const t=document.createElement("button");return t.id="add-task",t.textContent="Add Task",t.addEventListener("click",g.openModal),t}()),c.append(a),e(n.getAllTasks(o.id))}(0,r,a):function(t,n){c.append(n),"all"===t.dataset.category||("today"===t.dataset.category?function(){const t=s(Date.now());e(o.getAllTasks().filter((e=>e.dueDate===t)))}():"upcoming"===t.dataset.category?function(){const t=s(Date.now());e(o.getAllTasks().filter((e=>l(t,e.dueDate)<=7&&l(t,e.dueDate)>=0)))}():"anytime"===t.dataset.category||t.dataset.category)}(t,a)}function e(t){const e=document.createElement("div");e.className="tasks-container",t.forEach((t=>e.append(function(t,e=null){function n(t,e,n,o){const a=document.createElement(t);return a.className=e,a.textContent=n,o.appendChild(a),a}const o=document.createElement("div");o.className="task-card "+(t.completed?"completed":"");const c=n("div","meta-info","",o);if(n("p","date",`Date: ${s(t.date)}`,c),n("p","status",t.completed?"Completed":"Incomplete",c),e&&n("h4","project-title",`Project: ${e.title}`,o),n("h3","title",t.title,o),n("p","description",t.desc,o),n("p","",`Due Date: ${t.dueDate}`,o),n("p","",`Priority Level: ${t.priorityLevel}`,o),!t.completed){const e=n("button","btn remove-btn","Remove Task",o);e.dataset.taskId=t.id,e.addEventListener("click",i);const c=n("button","btn complete-btn","Complete Task",o);c.dataset.taskId=t.id,c.addEventListener("click",a)}return o}(t)))),c.append(e)}function a(e){o.markComplete(e.target.dataset.taskId),t(r)}function i(e){let n=JSON.parse(localStorage.getItem("tasks"));delete n[e.target.dataset.taskId],localStorage.setItem("tasks",JSON.stringify(n)),t(r)}return{getContent:t}}(),y=function(){document.querySelectorAll(".inbox-category").forEach((function(t){const e=t.querySelector("a");f.addNavigationClickEvent(e)}))},S=function(){function t(t){t.preventDefault(),p.openModal()}function e(t){const e=document.createElement("div");e.className="sidebar-element";const n=document.createElement("i");n.className="bi bi-dot";const o=document.createElement("a");o.innerHTML=t.name,o.setAttribute("href","javascript:;"),f.addNavigationClickEvent(o),o.dataset.title=t.name,o.dataset.projectId=t.id,e.append(n),e.append(o),a.append(e)}return{setup:function(){document.querySelector("#add-project").addEventListener("click",t),Object.values(JSON.parse(localStorage.getItem("projects"))).forEach((t=>{e(t)}))},buildProject:e}}();!function(){y(),S.setup(),p.setup(),g.setup();const t=document.getElementById("startpage");f.highlightElement(t),k.getContent(t)}()})();