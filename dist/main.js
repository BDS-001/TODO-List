(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{C:()=>y});const t=document.querySelector(".projects"),n=document.querySelector("#content");let o=null;function c(e){const t=new Date(e),n=("0"+t.getDate()).slice(-2),o=("0"+(t.getMonth()+1)).slice(-2);return`${t.getFullYear()}-${o}-${n}`}function a(e,t){const n=new Date(e),o=new Date(t).getTime()-n.getTime();return Math.ceil(o/864e5)}function r(e){e.reset()}function s(){return Math.floor(Math.random()*Date.now()).toString(16)+(new Date).getTime().toString(16)}const i=function(){if(!localStorage.getItem("projects")){const e={};t(JSON.stringify(e))}function e(){return JSON.parse(localStorage.getItem("projects"))}function t(e){localStorage.setItem("projects",JSON.stringify(e))}return{newProject:function(e,n){const o={name:e,desc:n,id:s(),tasks:[]},c=JSON.parse(localStorage.getItem("projects"));return c[o.id]=o,t(c),o},getCompletedTasks:function(e){return d.getTaskList().filter((t=>t.completed&&t.project==e))},getInProgressTasks:function(e){const t=d.getTaskList();if(t)return t.filter((t=>!t.completed&&t.project==e))},addTask:function(t,n,o,c,a){const r=e(),i=s(),l=d.newTask(i,n,o,t,c,a);return r[t].tasks.push(l.id),d.newTask(l),l},getAllProjectTasks:function(e){return d.getTaskList().filter((t=>t.project==e))},getProjectById:function(t){if(t)return e()[t]},deleteProject:function(n){const o=e();d.getTaskList().forEach((e=>{e.project===n&&d.deleteTask(e.id)})),delete o[n],t(o)},getProjects:e}}(),d=function(){function e(){return JSON.parse(localStorage.getItem("tasks"))}function t(e){localStorage.setItem("tasks",JSON.stringify(e))}return localStorage.getItem("tasks")||t({}),{markComplete:function(n){const o=e();o[n].completed=!0,t(o)},newTask:function(n,o,a,r,i){const d={id:s(),title:n,desc:o,date:c(Date.now()),project:a,completed:!1,dueDate:r,priorityLevel:i},l=e();return l[d.id]=d,t(l),d},getTaskList:function(){return Object.values(e())},findTaskById:function(t){return e()[t]},deleteTask:function(n){let o=e();delete o[n],t(o)},getTasks:e,updateTasks:t}}();function l(e,t){document.getElementById("modalOverlay").style.display=e,document.getElementById(t).style.display=e}function u(e,t){document.querySelector(e).addEventListener("click",t)}function p(e,t){document.querySelector(e).addEventListener("click",t)}const m=function(){const e=document.getElementById("projectForm");function t(){l("none","projectModal"),r(e)}function n(){let e=document.getElementById("projectName").value,n=document.getElementById("projectDescription").value;const o=i.newProject(e,n);y.buildProject(o),t()}return{openModal:function(){l("block","projectModal")},setup:function(){u(".project-close-btn",t),p("#submit-project",n),r(e)}}}(),g=function(){const e=document.getElementById("taskForm");function t(){l("none","taskModal"),r(e)}function n(){const e=document.getElementById("taskName").value,n=document.getElementById("taskDescription").value,c=document.getElementById("due-date").value,a=document.getElementById("priority-level").value;console.log("here"),d.newTask(e,n,o.dataset.projectId,c,a),k.getContent(o),t()}return{setup:function(){u(".task-close-btn",t),p("#submit-task",n),r(e)},openModal:function(){l("block","taskModal")}}}(),f=function(){function e(e){o&&(o.parentNode.style.backgroundColor="inherit"),e.parentNode.style.backgroundColor="var(--highlight-sidebar)",o=e}function t(t){t.preventDefault(),k.getContent(t.target),e(t.target)}return{changeView:t,addNavigationClickEvent:function(e){e.addEventListener("click",t)},highlightElement:e}}(),k=function(){function e(e){n.innerHTML="";const o=function(e){const t=document.createElement("div");return t.className="content-title",t.innerHTML=`<h1>${e}</h1>`,t}(e.dataset.title),r=function(e){const t=e.dataset.projectId;return t?i.getProjectById(t):null}(e);r?function(e,o,c){c.append(function(){const e=document.createElement("button");return e.id="add-task",e.textContent="Add Task",e.addEventListener("click",g.openModal),e}()),n.append(c),t(i.getAllProjectTasks(o.id))}(0,r,o):function(e,o){n.append(o),"all"===e.dataset.category?function(){const e=i.getProjects();Object.keys(i.getProjects()).forEach((function(o){const c=document.createElement("h2");c.innerHTML=`${e[o].name}`,n.appendChild(c),t(i.getAllProjectTasks(o))}))}():"today"===e.dataset.category?function(){const e=c(Date.now());t(d.getTaskList().filter((t=>t.dueDate===e)),!0)}():"upcoming"===e.dataset.category?function(){const e=c(Date.now());t(d.getTaskList().filter((t=>a(e,t.dueDate)<=7&&a(e,t.dueDate)>=0&&!t.completed)),!0)}():"inprogress"===e.dataset.category&&t(d.getTaskList().filter((e=>!e.completed)),!0)}(e,o)}function t(e,t=!1){const o=document.createElement("div");if(o.className="tasks-container",t){const t=i.getProjects();e.forEach((e=>o.append(r(e,t[e.project]))))}else e.forEach((e=>o.append(r(e))));n.append(o)}function r(e,t=null){function n(e,t,n,o){const c=document.createElement(e);return c.className=t,c.textContent=n,o.appendChild(c),c}const o=document.createElement("div");o.className="task-card "+(e.completed?"completed":"");const c=n("div","meta-info","",o);if(n("p","date",`Date: ${e.date}`,c),n("p","status",e.completed?"Completed":"Incomplete",c),t&&n("h4","project-title",`Project: ${t.name}`,o),n("h3","title",e.title,o),n("p","description",e.desc,o),n("p","",`Due Date: ${e.dueDate}`,o),e.completed)n("p","",`Priority Level: ${e.priorityLevel}`,o);else{const t=n("button","btn remove-btn","Remove Task",o);t.dataset.taskId=e.id,t.addEventListener("click",l);const c=n("button","btn complete-btn","Complete Task",o);c.dataset.taskId=e.id,c.addEventListener("click",s);const a=n("div","","",o);n("span","","Priority Level: ",a);const r=document.createElement("select");r.className="priority-select",r.dataset.taskId=e.id,["low","medium","high"].forEach((t=>{const n=document.createElement("option");n.value=t,n.textContent=t,n.selected=e.priorityLevel===t,r.appendChild(n)})),a.appendChild(r),r.addEventListener("change",(e=>{const t=e.target.dataset.taskId,n=e.target.value,o=d.getTasks();o[t].priorityLevel=n,d.updateTasks(o)}))}return o}function s(t){d.markComplete(t.target.dataset.taskId),e(o)}function l(t){const n=t.target.dataset.taskId;d.deleteTask(n),e(o)}return{getContent:e}}(),j=function(){document.querySelectorAll(".inbox-category").forEach((function(e){const t=e.querySelector("a");f.addNavigationClickEvent(t)}))},y=function(){function e(e){e.preventDefault(),m.openModal()}function n(e){const n=document.createElement("div");n.className="sidebar-element";const o=document.createElement("i");o.className="bi bi-dot";const c=document.createElement("a");c.innerHTML=e.name,c.setAttribute("href","javascript:;"),f.addNavigationClickEvent(c),c.dataset.title=e.name,c.dataset.projectId=e.id;const a=document.createElement("button");a.className="delete-project-btn";const r=document.createElement("i");r.className="bi bi-trash",r.dataset.projectId=e.id,a.appendChild(r),a.onclick=function(e){console.log("delete project");const t=e.target.dataset.projectId;i.deleteProject(t),window.location.reload()},n.append(o),n.append(c),n.append(a),t.append(n)}return{setup:function(){document.querySelector("#add-project").addEventListener("click",e),Object.values(i.getProjects()).forEach((e=>{n(e)}))},buildProject:n}}();!function(){j(),y.setup(),m.setup(),g.setup();const e=document.getElementById("startpage");f.highlightElement(e),k.getContent(e)}()})();